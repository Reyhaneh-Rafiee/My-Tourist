<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>admin panel</title>
    <link rel="stylesheet" href="css/bootstrap.min.css">
    <link rel="stylesheet" href="style.css">
    <script type="text/javascript" src="js/bootstrap.bundle.min.js"></script>
    <script type="text/javascript" src="js/jquery.min.js"></script>

</head>
<script>
document.addEventListener("DOMContentLoaded", function() {
    const input = document.getElementById('imageInput');
    const preview = document.getElementById('imagePreview');

    input.addEventListener('change', function(event){
        const file = event.target.files[0];
        if(file){
            const reader = new FileReader();
            reader.onload = function(e){
                preview.src = e.target.result;
                preview.style.display = 'block';
            }
            reader.readAsDataURL(file);
        }
    });
});
document.addEventListener("DOMContentLoaded", function() {
    const textarea = document.querySelector('textarea[name="desc"]');

    textarea.addEventListener('keydown', function(e) {
        if (e.key === 'Enter' && !e.shiftKey) {
            e.preventDefault(); // جلوگیری از ایجاد خط جدید
            this.form.submit(); // ارسال فرم
        }
        // اگر Shift+Enter باشه، کاری انجام نمیده و خط جدید ایجاد میشه
    });
});
document.addEventListener("DOMContentLoaded", function() {
    const priceInput = document.getElementById('priceInput');

    priceInput.addEventListener('input', function(e) {
        // حذف همه غیر اعداد
        let value = this.value.replace(/\D/g, '');
        if(value) {
            // جدا کردن سه رقم سه رقم
            value = Number(value).toLocaleString('en-US');
            this.value = value + ' تومان';
        } else {
            this.value = '';
        }
    });

    // اگر بخوای هنگام ارسال فرم فقط عدد خالی بفرسته
    const form = this.querySelector('form');
    if(form){
        form.addEventListener('submit', function(){
            priceInput.value = priceInput.value.replace(/\D/g,''); // فقط عدد بفرسته
        });
    }
});

</script>
<body>
<nav class="nav top-bar">
    <h2 class="float-left">Admin Panel</h2>
</nav>

<div class="container-fluid">
    <div class="row admin-panel">
        <div class="col-2">
            <div class="list-item">
                <a href="index.html">پیشخوان</a>
                <a href="../index.html">مشاهده سایت</a>
                <a href="add-new-tour.html">تور جدید</a>
                <a href="orders.html">سفارشات تور</a>
                <a href="add-new-jazebe.html">جاذبه جدید</a>
                <a href="../php/logout.php">خروج</a>
            </div>
        </div>



<div class="card mb-3">
    <div class="card-header">
    افزودن تور جدید
    </div>
    <div class="card-body">
        <!-- form area -->
        <form action="../php/add-tour.php" method="POST" enctype="multipart/form-data">
            <div class="row">
                <div class="col-md-8">
                    <div class="form-group">
                        <input type="text" name="title" class="form-control" placeholder="عنوان ">
                    </div>
                    <div class="form-group">
                        <textarea name="desc" cols="30" rows="10" class="form-control" placeholder="توضیحات "></textarea>
                    </div>
                    <div class="form-group row">
                        <div class="col-xs-3">
                          <input name="price" type="text" class="form-control" id="priceInput" placeholder="قیمت">
                        </div>
                    </div>
                </div><!--Main Content-->
                <aside class="col-md-4">
                   <div class="form-group d-flex justify-content-between action-buttons">
    <input type="reset" class="btn btn-warning w-50 me-4" value="پاک کردن">
    <input type="submit" class="btn btn-primary w-50" value="افزودن">
</div>

                    <div class="form-group image-upload-box">
    <label>انتخاب عکس</label>
    <input type="file" accept="image/*" class="form-control-file" id="imageInput">
    <div class="image-preview mt-2">
        <img id="imagePreview" alt="پیش‌نمایش عکس">
    </div>
</div>
                </aside><!--SIDEBAR-->
            </div>
        </form>

        <!-- end form -->
    </div>
</div>
</body>
</html>